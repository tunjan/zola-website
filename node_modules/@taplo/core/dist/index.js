(function(t,r){typeof exports=="object"&&typeof module<"u"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.taploCore={}))})(this,function(t){"use strict";function r(e){typeof fetch>"u"&&(e.fetch?(global.Headers=e.fetch.Headers,global.Request=e.fetch.Request,global.Response=e.fetch.Response,global.fetch=e.fetch.fetch):console.warn("fetch was not provided, HTTP operations will not be possible"))}function u(e){const s=typeof e.stdin=="function"?e.stdin:a(e.stdin),i=typeof e.stdout=="function"?e.stdout:d(e.stdout),o=typeof e.stderr=="function"?e.stderr:d(e.stderr);return{js_now:e.now,js_env_var:e.envVar,js_env_vars:e.envVars,js_atty_stderr:e.stdErrAtty,js_on_stdin:s,js_on_stdout:i,js_on_stderr:o,js_glob_files:e.glob,js_read_file:e.readFile,js_write_file:e.writeFile,js_to_file_path:e.urlToFilePath,js_is_absolute:e.isAbsolute,js_cwd:e.cwd,js_find_config_file:e.findConfigFile}}function d(e){return s=>new Promise(i=>{e.write(s),i(s.length)})}function a(e){let s=!1;return i=>{let o=!1;return new Promise((f,_)=>{if(s)return f(new Uint8Array);function l(){const n=e.read(Number(i));n!==null&&(o||(o=!0,f(n),e.off("readable",l)))}e.on("readable",l),e.once("end",()=>{s=!0,o||(o=!0,f(new Uint8Array))}),e.once("error",n=>{o||(o=!0,_(n))})})}}var c=Object.freeze({__proto__:null});t.Lsp=c,t.convertEnv=u,t.prepareEnv=r,Object.defineProperty(t,"__esModule",{value:!0})});
