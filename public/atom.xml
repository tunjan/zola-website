<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title></title>
    <subtitle>My personal website</subtitle>
    <link rel="self" type="application/atom+xml" href="https://albertotrigo.eu/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://albertotrigo.eu"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2024-05-06T00:00:00+00:00</updated>
    <id>https://albertotrigo.eu/atom.xml</id>
    <entry xml:lang="en">
        <title>Hosting websites</title>
        <published>2024-04-26T00:00:00+00:00</published>
        <updated>2024-05-06T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://albertotrigo.eu/blog/websites/"/>
        <id>https://albertotrigo.eu/blog/websites/</id>
        
        <content type="html" xml:base="https://albertotrigo.eu/blog/websites/">&lt;p&gt;A few days ago I decided to learn how to self-host multiple services (calibre, quartz, etc) on my own server. This lead me through a bit of a rabbithole and mutiple conversations with LLMs, which were of great help. After that, I decided to write this post to remind myself in case I need to do it in the future.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;utilities&quot;&gt;Utilities&lt;&#x2F;h2&gt;
&lt;p&gt;The main utilities that I used to accomplish the task were &lt;strong&gt;Vultr&lt;&#x2F;strong&gt; for a virtual machine, &lt;strong&gt;DreamHost&lt;&#x2F;strong&gt; for domain names and &lt;strong&gt;nginx&lt;&#x2F;strong&gt; for serving the files.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;vultr&quot;&gt;Vultr&lt;&#x2F;h3&gt;
&lt;p&gt;I am using one of the cheapest options. The machine has 25GB of internal storage, 1 vCPU and 1024MB of RAM. The monthly cost is 6$, which I consider to be a fair price. I might decide to buy a Raspberry Pi in the future, which may achieve similar results for a lower long-term cost.&lt;&#x2F;p&gt;
&lt;p&gt;This machine will be were the files are stored. The main tool to connect from your host machine is using the &lt;strong&gt;ssh&lt;&#x2F;strong&gt; protocol.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;dreamhost&quot;&gt;Dreamhost&lt;&#x2F;h3&gt;
&lt;p&gt;I got the &lt;em&gt;wiki&lt;&#x2F;em&gt; domain name for 2$&#x2F;year. It costs more to renew it for another year, so I will decide when the time comes what to do with it.&lt;&#x2F;p&gt;
&lt;p&gt;I am using subdomains (eg. subdomain.maindomain.org), so I needed to create new “A records” for each subdomain. Yes, I should also add the ipv6 addresses for the subdomains.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;dreamhost.png&quot; alt=&quot;picture of dreamhost&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;nginx&quot;&gt;Nginx&lt;&#x2F;h3&gt;
&lt;p&gt;After building the website into the &lt;code&gt;public&#x2F;&lt;&#x2F;code&gt; folder of my project, I moved the content of that folder into the host machine folder &lt;code&gt;&#x2F;var&#x2F;www&#x2F;mysite&lt;&#x2F;code&gt;. Next, I created a file in &lt;code&gt;&#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;your-domain.conf&lt;&#x2F;code&gt;. Inside that file I put the following contents.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;nginx&quot; style=&quot;background-color:#0f1419;color:#bfbab0;&quot; class=&quot;language-nginx &quot;&gt;&lt;code class=&quot;language-nginx&quot; data-lang=&quot;nginx&quot;&gt;&lt;span&gt;server {
&lt;&#x2F;span&gt;&lt;span&gt;    listen 80;
&lt;&#x2F;span&gt;&lt;span&gt;    server_name your-domain.com; 
&lt;&#x2F;span&gt;&lt;span&gt;    root &#x2F;var&#x2F;www&#x2F;mysite;
&lt;&#x2F;span&gt;&lt;span&gt;    index index.html;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    location &#x2F; {
&lt;&#x2F;span&gt;&lt;span&gt;        try_files $uri $uri&#x2F; =404;
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then, I created a soft-link:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#0f1419;color:#bfbab0;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffb454;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; ln&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f29718;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span&gt; &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;your-domain.conf &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Started nginx as a systemd service:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#0f1419;color:#bfbab0;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffb454;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; systemctl enable nginx.service
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Checked my nginx configuation:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#0f1419;color:#bfbab0;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffb454;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; nginx&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f29718;&quot;&gt; -t
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And restarted nginx:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#0f1419;color:#bfbab0;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffb454;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; systemctl restart nginx
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To enable the https protocol I installed certbot and run it&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#0f1419;color:#bfbab0;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffb454;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apt install certbot python3-certbot-nginx 
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb454;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; certbot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f29718;&quot;&gt; --nginx -d&lt;&#x2F;span&gt;&lt;span&gt; your-domain.com
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;&#x2F;strong&gt;: To log into the virtual machine you need to use SSH:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#0f1419;color:#bfbab0;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#ffb454;&quot;&gt;ssh&lt;&#x2F;span&gt;&lt;span&gt; username@server_ip_address
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
</feed>
